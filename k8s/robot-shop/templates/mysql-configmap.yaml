apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-initdb
data:
  15-shipping.sql: |
    CREATE DATABASE IF NOT EXISTS cities;

    CREATE USER IF NOT EXISTS 'shipping'@'%' IDENTIFIED BY 'shipping';
    GRANT ALL PRIVILEGES ON cities.* TO 'shipping'@'%';
    FLUSH PRIVILEGES;

    USE cities;

    CREATE TABLE IF NOT EXISTS cities (
        code VARCHAR(5) PRIMARY KEY,
        name VARCHAR(50) NOT NULL,
        multiplier FLOAT NOT NULL
    );

    INSERT INTO cities (code, name, multiplier) VALUES
    ('IN', 'India', 0.8),
    ('US', 'United States', 1.0),
    ('UK', 'United Kingdom', 1.2),
    ('CA', 'Canada', 1.1),
    ('AU', 'Australia', 1.3);

    CREATE TABLE IF NOT EXISTS rates (
        weight INT NOT NULL,
        price FLOAT NOT NULL
    );

    INSERT INTO rates (weight, price) VALUES
    (1, 5),
    (5, 15),
    (10, 30),
    (20, 50);
